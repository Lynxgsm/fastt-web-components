{"version":3,"file":"satisfaction-state.js","sourceRoot":"","sources":["../../src/utils/satisfaction-state.ts"],"names":[],"mappings":"AAEA,MAAM,wBAAwB;IACpB,KAAK,GAAmC,IAAI,GAAG,EAAE,CAAC;IAClD,SAAS,GAAyD,IAAI,GAAG,EAAE,CAAC;IAEpF,QAAQ,CAAC,cAAsB,EAAE,KAAwB;QACvD,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,cAAc,EAAE,KAAK,CAAC,CAAC;QACtC,IAAI,CAAC,eAAe,CAAC,cAAc,EAAE,KAAK,CAAC,CAAC;IAC9C,CAAC;IAED,QAAQ,CAAC,cAAsB;QAC7B,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,cAAc,CAAC,IAAI,IAAI,CAAC;IAChD,CAAC;IAED,SAAS,CAAC,cAAsB,EAAE,QAA4C;QAC5E,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,cAAc,CAAC,EAAE,CAAC;YACxC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,cAAc,EAAE,IAAI,GAAG,EAAE,CAAC,CAAC;QAChD,CAAC;QAED,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,cAAc,CAAE,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAElD,8BAA8B;QAC9B,OAAO,GAAG,EAAE;YACV,MAAM,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;YACrD,IAAI,SAAS,EAAE,CAAC;gBACd,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;gBAC3B,IAAI,SAAS,CAAC,IAAI,KAAK,CAAC,EAAE,CAAC;oBACzB,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC;gBACxC,CAAC;YACH,CAAC;QACH,CAAC,CAAC;IACJ,CAAC;IAEO,eAAe,CAAC,cAAsB,EAAE,KAAwB;QACtE,MAAM,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;QACrD,IAAI,SAAS,EAAE,CAAC;YACd,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;QACjD,CAAC;IACH,CAAC;CACF;AAED,MAAM,CAAC,MAAM,wBAAwB,GAAG,IAAI,wBAAwB,EAAE,CAAC","sourcesContent":["type SatisfactionState = 'up' | 'down' | null;\n\nclass SatisfactionStateService {\n  private state: Map<string, SatisfactionState> = new Map();\n  private listeners: Map<string, Set<(state: SatisfactionState) => void>> = new Map();\n\n  setState(conversationId: string, state: SatisfactionState): void {\n    this.state.set(conversationId, state);\n    this.notifyListeners(conversationId, state);\n  }\n\n  getState(conversationId: string): SatisfactionState {\n    return this.state.get(conversationId) || null;\n  }\n\n  subscribe(conversationId: string, callback: (state: SatisfactionState) => void): () => void {\n    if (!this.listeners.has(conversationId)) {\n      this.listeners.set(conversationId, new Set());\n    }\n    \n    this.listeners.get(conversationId)!.add(callback);\n\n    // Return unsubscribe function\n    return () => {\n      const listeners = this.listeners.get(conversationId);\n      if (listeners) {\n        listeners.delete(callback);\n        if (listeners.size === 0) {\n          this.listeners.delete(conversationId);\n        }\n      }\n    };\n  }\n\n  private notifyListeners(conversationId: string, state: SatisfactionState): void {\n    const listeners = this.listeners.get(conversationId);\n    if (listeners) {\n      listeners.forEach(callback => callback(state));\n    }\n  }\n}\n\nexport const satisfactionStateService = new SatisfactionStateService();"]}