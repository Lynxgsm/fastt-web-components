{"version":3,"file":"satisfaction-state.js","sourceRoot":"","sources":["../../src/utils/satisfaction-state.ts"],"names":[],"mappings":"AAEA,MAAM,wBAAwB;IACpB,KAAK,GAAmC,IAAI,GAAG,EAAE,CAAC;IAClD,SAAS,GAAyD,IAAI,GAAG,EAAE,CAAC;IAEpF,QAAQ,CAAC,SAAiB,EAAE,KAAwB;QAClD,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;QACjC,IAAI,CAAC,eAAe,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;IACzC,CAAC;IAED,QAAQ,CAAC,SAAiB;QACxB,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,SAAS,CAAC,IAAI,IAAI,CAAC;IAC3C,CAAC;IAED,SAAS,CAAC,SAAiB,EAAE,QAA4C;QACvE,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE,CAAC;YACnC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,IAAI,GAAG,EAAE,CAAC,CAAC;QAC3C,CAAC;QAED,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,CAAE,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAE7C,8BAA8B;QAC9B,OAAO,GAAG,EAAE;YACV,MAAM,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;YAChD,IAAI,SAAS,EAAE,CAAC;gBACd,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;gBAC3B,IAAI,SAAS,CAAC,IAAI,KAAK,CAAC,EAAE,CAAC;oBACzB,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;gBACnC,CAAC;YACH,CAAC;QACH,CAAC,CAAC;IACJ,CAAC;IAEO,eAAe,CAAC,SAAiB,EAAE,KAAwB;QACjE,MAAM,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QAChD,IAAI,SAAS,EAAE,CAAC;YACd,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;QACjD,CAAC;IACH,CAAC;CACF;AAED,MAAM,CAAC,MAAM,wBAAwB,GAAG,IAAI,wBAAwB,EAAE,CAAC","sourcesContent":["type SatisfactionState = 'up' | 'down' | null;\n\nclass SatisfactionStateService {\n  private state: Map<string, SatisfactionState> = new Map();\n  private listeners: Map<string, Set<(state: SatisfactionState) => void>> = new Map();\n\n  setState(messageId: string, state: SatisfactionState): void {\n    this.state.set(messageId, state);\n    this.notifyListeners(messageId, state);\n  }\n\n  getState(messageId: string): SatisfactionState {\n    return this.state.get(messageId) || null;\n  }\n\n  subscribe(messageId: string, callback: (state: SatisfactionState) => void): () => void {\n    if (!this.listeners.has(messageId)) {\n      this.listeners.set(messageId, new Set());\n    }\n    \n    this.listeners.get(messageId)!.add(callback);\n\n    // Return unsubscribe function\n    return () => {\n      const listeners = this.listeners.get(messageId);\n      if (listeners) {\n        listeners.delete(callback);\n        if (listeners.size === 0) {\n          this.listeners.delete(messageId);\n        }\n      }\n    };\n  }\n\n  private notifyListeners(messageId: string, state: SatisfactionState): void {\n    const listeners = this.listeners.get(messageId);\n    if (listeners) {\n      listeners.forEach(callback => callback(state));\n    }\n  }\n}\n\nexport const satisfactionStateService = new SatisfactionStateService();"]}