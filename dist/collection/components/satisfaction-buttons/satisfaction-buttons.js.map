{"version":3,"file":"satisfaction-buttons.js","sourceRoot":"","sources":["../../../src/components/satisfaction-buttons/satisfaction-buttons.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Env, Host, Prop, State, h } from '@stencil/core';\nimport { handleFeedback } from '../../utils/api-service';\nimport { satisfactionStateService } from '../../utils/satisfaction-state';\n\n@Component({\n  tag: 'satisfaction-buttons',\n  styleUrl: 'satisfaction-buttons.css',\n  shadow: true,\n})\nexport class SatisfactionButtons {\n  @Prop() apiEndpoint: string = (Env.API_URL = 'https://fastt.celaneo.com');\n  @Prop() conversationId: string = '';\n  @State() selectedButton: 'up' | 'down' | null = null;\n\n  private unsubscribe: (() => void) | null = null;\n\n  componentDidLoad() {\n    // Initialize state from service\n    this.selectedButton = satisfactionStateService.getState(this.conversationId);\n\n    // Subscribe to state changes\n    this.unsubscribe = satisfactionStateService.subscribe(this.conversationId, state => {\n      this.selectedButton = state;\n    });\n  }\n\n  disconnectedCallback() {\n    // Clean up subscription\n    if (this.unsubscribe) {\n      this.unsubscribe();\n    }\n  }\n\n  private handleThumbsUp = () => {\n    satisfactionStateService.setState(this.conversationId, 'up');\n    handleFeedback(1, this.apiEndpoint, this.conversationId, () => {\n      console.log('Thumbs up clicked');\n    });\n  };\n\n  private handleThumbsDown = () => {\n    satisfactionStateService.setState(this.conversationId, 'down');\n    handleFeedback(0, this.apiEndpoint, this.conversationId, () => {\n      console.log('Thumbs down clicked');\n    });\n  };\n\n  render() {\n    return (\n      <Host>\n        <div class=\"satisfaction-container\">\n          <div class=\"satisfaction-buttons\">\n            <button\n              title=\"Réponse utile\"\n              class={`satisfaction-btn thumbs-up ${this.selectedButton === 'up' ? 'active' : ''}`}\n              onClick={this.handleThumbsUp}\n              aria-label=\"Réponse utile\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\"\n                height=\"24\"\n                viewBox=\"0 0 24 24\"\n                fill={this.selectedButton === 'up' ? '#ff8834' : 'none'}\n                stroke={this.selectedButton === 'up' ? '#ff8834' : 'currentColor'}\n                stroke-width=\"2\"\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n                class=\"lucide lucide-thumbs-up-icon lucide-thumbs-up\"\n              >\n                <path d=\"M7 10v12\" />\n                <path d=\"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z\" />\n              </svg>\n            </button>\n            <button\n              title=\"Réponse inutile\"\n              class={`satisfaction-btn thumbs-down ${this.selectedButton === 'down' ? 'active' : ''}`}\n              onClick={this.handleThumbsDown}\n              aria-label=\"Réponse pas utile\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\"\n                height=\"24\"\n                viewBox=\"0 0 24 24\"\n                fill={this.selectedButton === 'down' ? '#ff8834' : 'none'}\n                stroke={this.selectedButton === 'down' ? '#ff8834' : 'currentColor'}\n                stroke-width=\"2\"\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n                class=\"lucide lucide-thumbs-down-icon lucide-thumbs-down\"\n              >\n                <path d=\"M17 14V2\" />\n                <path d=\"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z\" />\n              </svg>\n            </button>\n          </div>\n        </div>\n      </Host>\n    );\n  }\n}\n"]}